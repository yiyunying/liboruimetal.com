"use strict";(globalThis.webpackChunkblocksy_companion=globalThis.webpackChunkblocksy_companion||[]).push([[64,806],{806:function(e,t,n){n.d(t,{Q:function(){return a},R:function(){return u}});var r=n(942);function o(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(){var e=JSON.parse(localStorage.getItem("blocksyPastPopups")),t={};return Array.isArray(e)?e.forEach((function(e){t[e]={closed:{reason:"cancel",timestamp:(new Date).getTime()},pages:[]}})):t=e,(t=Object.keys(t||{}).reduce((function(e,n){var i=t[n],a=i.isExpired,u=o(i,["isExpired"]);return c(c({},e),{},(0,r.Z)({},n,c(c({},u),u.closed?{}:{closed:a?{reason:"cancel",timestamp:(new Date).getTime()}:null})))}),{}))||{}},u=function(e){var t=e.id.replace("ct-popup-",""),n=a()[t];if(e.dataset.popupRelaunch&&e.dataset.popupRelaunch.indexOf("custom")>-1&&n){var r=e.dataset.popupRelaunch.split(":"),o=0,i=0;r.length>1&&(i=o=parseInt(r[1])),r.length>2&&(i=parseInt(r[2]));var c=n.closed;if(!c||!c.timestamp)return!1;var u="cancel"===c.reason?o:i;return!((new Date-new Date(c.timestamp))/864e5>u)}return n&&n.closed}},64:function(e,t,n){n.r(t),n.d(t,{handleTriggers:function(){return p}});var r=n(942),o=n(433),i=n(806);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.e(12).then(n.bind(n,12)).then((function(e){return e.openMicroPopup.apply(void 0,t)}))},p=function(){if((0,o.Z)(document.querySelectorAll('[data-popup-mode*="page_load"]')).filter((function(e){return!(0,i.R)(e)})).map((function(e){return u(e)})),(0,o.Z)(document.querySelectorAll('[data-popup-mode*="after_x_time"]')).filter((function(e){return!(0,i.R)(e)})).map((function(e){var t=e.dataset.popupMode.split(":")[1];setTimeout((function(){u(e)}),1e3*parseInt(t,10))})),document.querySelector('[data-popup-mode*="after_x_pages"]')){var e=(0,o.Z)(document.querySelectorAll('[data-popup-mode*="after_x_pages"]')).filter((function(e){return!(0,i.R)(e)}));if(e.length>0){var t=(0,i.Q)();e.map((function(e){var n,r,i=e.id.replace("ct-popup-",""),c=parseFloat(e.dataset.popupMode.split(":")[1])+1,p=a(a({},null!==(n=t[i])&&void 0!==n?n:{}),{},{pages:Array.from(new Set([].concat((0,o.Z)((null!==(r=t[i])&&void 0!==r?r:{}).pages||[]),[location.href])))});t[i]=p,p.pages.length>=c&&u(e)})),localStorage.setItem("blocksyPastPopups",JSON.stringify(t))}}if(document.querySelector('[data-popup-mode*="exit_intent"]')&&(0,o.Z)(document.querySelectorAll('[data-popup-mode*="exit_intent"]')).filter((function(e){return!(0,i.R)(e)})).length>0){document.addEventListener("mouseout",(function e(t){(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&(0,o.Z)(document.querySelectorAll('[data-popup-mode*="exit_intent"]')).map((function(t){t.classList.contains("active")||(u(t),document.removeEventListener("mouseout",e))}))}))}document.querySelector('[data-popup-mode*="element_reveal"]')&&(0,o.Z)(document.querySelectorAll('[data-popup-mode*="element_reveal"]')).filter((function(e){return!(0,i.R)(e)})).map((function(e){var t=e.dataset.popupMode.split(":")[1];if(document.querySelector(t)){var n=new IntersectionObserver((function(t){0!==t.filter((function(e){return e.isIntersecting})).map((function(e){return e.target})).length&&(u(e),n.disconnect())}));(0,o.Z)(document.querySelectorAll(t)).map((function(e){n.observe(e)}))}})),document.querySelector('[data-popup-mode*="element_click"]')&&(0,o.Z)(document.querySelectorAll('[data-popup-mode*="element_click"]')).filter((function(e){return!(0,i.R)(e)})).map((function(e){var t=e.dataset.popupMode.split(":")[1];document.querySelector(t)&&(0,o.Z)(document.querySelectorAll(t)).map((function(t){t.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),u(e)}))}))})),document.querySelector('[data-popup-mode*="after_inactivity"]')&&(0,o.Z)(document.querySelectorAll('[data-popup-mode*="after_inactivity"]')).filter((function(e){return!(0,i.R)(e)})).map((function(e){var t;function n(){u(e),t&&clearTimeout(t),window.removeEventListener("load",r),window.removeEventListener("mousemove",r),window.removeEventListener("mousedown",r),window.removeEventListener("touchstart",r),window.removeEventListener("click",r),window.removeEventListener("keydown",r),window.removeEventListener("scroll",r,!0)}function r(){var r=e.dataset.popupMode.split(":")[1];clearTimeout(t),t=setTimeout(n,1e3*parseInt(r,10))}window.addEventListener("load",r),window.addEventListener("mousemove",r),window.addEventListener("mousedown",r),window.addEventListener("touchstart",r),window.addEventListener("click",r),window.addEventListener("keydown",r),window.addEventListener("scroll",r,!0)}))}},942:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})}}]);