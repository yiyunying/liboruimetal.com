"use strict";(globalThis.webpackChunkblocksy_companion=globalThis.webpackChunkblocksy_companion||[]).push([[12],{12:function(e,t,o){o.r(t),o.d(t,{closeMicroPopup:function(){return I},openMicroPopup:function(){return W}});var n=o(942),r=o(433),c=o(526),i=o.n(c),a=o(806),l=["button:enabled:not([readonly])","select:enabled:not([readonly])","textarea:enabled:not([readonly])","input:enabled:not([readonly])","a[href]","area[href]","iframe","object","embed","[tabindex]","[contenteditable]","[autofocus]"],s=null,u=function(e){if(s){var t=(0,r.Z)(s.querySelectorAll(l.join(","))),o=t[0],n=t[t.length-1];"Tab"!==e.key&&9!==e.keyCode||(t.includes(document.activeElement)||(o.focus(),e.preventDefault()),e.shiftKey?document.activeElement===o&&(n.focus(),e.preventDefault()):document.activeElement===n&&(o.focus(),e.preventDefault()))}},d=function(e){if(!s||s===e){var t=e.querySelectorAll(l.join(","));0!==t.length&&(s=e,document.addEventListener("keydown",u),setTimeout((function(){t[0].focus()}),50))}},f=function(e){e.removeEventListener("keydown",u),s=null},p=function(){return window.ctFrontend&&window.ctFrontend.focusLockManager||(window.ctFrontend.focusLockManager={focusLockOn:d,focusLockOff:f}),window.ctFrontend.focusLockManager};var m=!1;if("undefined"!=typeof window){var v={get passive(){m=!0}};window.addEventListener("testPassive",null,v),window.removeEventListener("testPassive",null,v)}var y="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),w=[],g=!1,b=-1,h=void 0,k=void 0,L=function(e){return w.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},S=function(e){var t=e||window.event;return!!L(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},E=function(){void 0!==k&&(document.body.style.paddingRight=k,k=void 0),void 0!==h&&(document.body.style.overflow=h,h=void 0)},O=function(e,t){if(e){if(!w.some((function(t){return t.targetElement===e}))){var o={targetElement:e,options:t||{}};w=[].concat(function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(w),[o]),y?(e.ontouchstart=function(e){1===e.targetTouches.length&&(b=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var o=e.targetTouches[0].clientY-b;!L(e.target)&&(t&&0===t.scrollTop&&o>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&o<0?S(e):e.stopPropagation())}(t,e)},g||(document.addEventListener("touchmove",S,m?{passive:!1}:void 0),g=!0)):function(e){if(void 0===k){var t=!!e&&!0===e.reserveScrollBarGap,o=window.innerWidth-document.documentElement.clientWidth;t&&o>0&&(k=document.body.style.paddingRight,document.body.style.paddingRight=o+"px")}void 0===h&&(h=document.body.style.overflow,document.body.style.overflow="hidden")}(t)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},P="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),A=function(e){P?(y?(w.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),g&&(document.removeEventListener("touchmove",S,m?{passive:!1}:void 0),g=!1),b=-1):E(),w=[]):(document.body.style.overflow="",document.body.style.removeProperty("--scrollbar-width"))},_=function(e){if(P)e&&O(e,{allowTouchMove:function(e){return!!e.closest(".select2-container")}});else{var t=window.innerWidth-document.documentElement.clientWidth;t>0&&document.body.style.setProperty("--scrollbar-width","".concat(t,"px")),document.body.style.overflow="hidden"}},C=function(){return window.ctFrontend&&window.ctFrontend.scrollLockManager||(window.ctFrontend=window.ctFrontend||{},window.ctFrontend.scrollLockManager={enable:A,disable:_}),window.ctFrontend.scrollLockManager};var T=o(199),j=o(181);function q(e){return function(e){if(Array.isArray(e))return e}(e)||(0,T.Z)(e)||(0,j.Z)(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=o(73),M=o.n(D);function Z(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Z(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var F=function(e){27===e.keyCode&&(0,r.Z)(document.querySelectorAll(".ct-popup.active")).map((function(e){I(e)}))},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=x({unmount:!0,reason:"cancel",delay:0},t),setTimeout((function(){var o=e.id.replace("ct-popup-","");i().trigger("blocksy:micro-popups:close",o,e),localStorage.setItem("blocksyPastPopups",JSON.stringify(x(x({},(0,a.Q)()),{},(0,n.Z)({},o,x(x({},(0,a.Q)()[o]||{}),{},{pages:[location.href],closed:{reason:t.reason,timestamp:(new Date).getTime()}}))))),e.classList.toggle("active"),setTimeout((function(){var t=e.querySelector(".ct-dynamic-popup-content");t&&t.remove()}),500),p().focusLockOff(e),e.dataset.scrollLock&&C().enable(e.querySelector(".entry-content")),(0,r.Z)(e.querySelectorAll('iframe[src*="youtu"]')).map((function(e){e.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")})),(0,r.Z)(e.querySelectorAll("video")).map((function(e){e.pause()})),(0,r.Z)(e.querySelectorAll('iframe:not([src*="youtu"])')).map((function(e){var t=e.src;e.src="",e.src=t})),document.removeEventListener("keyup",F),e.unmount&&t.unmount&&e.unmount()}),t.delay)},Q=function(e){var t=e.id.replace("ct-popup-","");i().trigger("blocksy:micro-popups:open",t,e),i().trigger("blocksy:frontend:init"),e.classList.add("active"),localStorage.setItem("blocksyPastPopups",JSON.stringify(x(x({},(0,a.Q)()),{},(0,n.Z)({},t,x(x({},(0,a.Q)()[t]||{}),{},{pages:(0,r.Z)(((0,a.Q)()[t]||{}).pages||[]),closed:null}))))),p().focusLockOn(e),e.dataset.scrollLock&&C().disable(e.querySelector(".entry-content"));var o=e.querySelector(".ct-toggle-close");o&&!o.hasClickListener&&(o.hasClickListener=!0,e.querySelector(".ct-toggle-close").addEventListener("click",(function(t){t.preventDefault(),I(e)}))),"yes"!==e.dataset.popupBackdrop||e.hasClickListener||(e.hasClickListener=!0,e.addEventListener("click",(function(t){"yes"===t.target.dataset.popupBackdrop&&(t.preventDefault(),I(e))}))),document.addEventListener("keyup",F),e.dataset.popupAdditionalClose&&function(e){var t=1e3*+(e.dataset.popupCloseDelay||0);if(e.dataset.popupAdditionalClose.indexOf("button_click")>-1){var o=q(e.dataset.popupAdditionalClose.split(":")),n=(o[0],o.slice(1)),r=e.querySelector(n.join(":"));r&&!r.hasAdditionalCloseEvent&&(r.hasAdditionalCloseEvent=!0,r.addEventListener("click",(function(o){o.preventDefault(),I(e,{reason:"button_click",delay:t})})))}if(e.dataset.popupAdditionalClose.indexOf("form_submit")>-1){var c=e.querySelector("form");if(c&&!c.hasAdditionalCloseEvent)if(c.hasAdditionalCloseEvent=!0,window.document.body.addEventListener("kb-form-success",(function(){I(e,{reason:"form_submit:kadence",delay:t})}),!1),c.matches(".wpforms-form"))M()(c).on("wpformsAjaxSubmitSuccess",(function(){I(e,{reason:"form_submit:wpforms",delay:t})}));else if(c.matches("form.frm-fluent-form"))M()(c).on("fluentform_submission_success",(function(o){I(e,{reason:"form_submit:fluentform",delay:t})}));else if(c.matches(".gform_anchor")){var i=c.id;i=parseInt(i.replace(/\D/g,"")),jQuery(document).on("gform_confirmation_loaded",(function(o,n){i===n&&I(e,{reason:"form_submit:gravityforms",delay:t})}))}else c.addEventListener("submit",(function(o){o.preventDefault(),I(e,{reason:"form_submit:default",delay:t})}))}}(e)},B=null,W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.classList.contains("active"))I(e);else{if(!e.querySelector(".entry-content")){var o=function(t){var o=document.createElement("div");o.innerHTML=t,o.querySelector(".entry-content")&&(e.querySelector("article").appendChild(o.querySelector(".entry-content")),e.querySelector("article").lastElementChild.classList.add("ct-dynamic-popup-content")),Q(e)},c=e.id.replace("ct-popup-",""),i=(0,a.Q)()[c],l=e.dataset.cacheKey;if(l&&i&&i.content&&i.content.cacheKey===l)return void o(i.content.content);var s=new FormData,u=t.postId;if(!u){var d=(0,r.Z)(document.body.classList).find((function(e){return 0===e.indexOf("postid-")}));d&&(u=d.replace("postid-",""))}return s.append("popup_id",c),u&&s.append("post_id",u),B&&B.abort(),"AbortController"in window&&(B=new AbortController),void fetch("".concat(ct_localizations.ajax_url,"?action=blc_retrieve_popup_content"),{method:"POST",body:s,signal:B.signal}).then((function(e){return e.json()})).then((function(e){var t=e.success,r=e.data;t&&r&&r.content&&(l&&localStorage.setItem("blocksyPastPopups",JSON.stringify(x(x({},(0,a.Q)()),{},(0,n.Z)({},c,x(x({},(0,a.Q)()[c]||{}),{},{content:{content:r.content,cacheKey:l}}))))),o(r.content))}))}Q(e)}}}}]);